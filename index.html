<!DOCTYPE html>
<html>
<body>

<h2>Login</h2>

<input id="email" placeholder="email">
<input id="password" type="password" placeholder="password">

<button onclick="login()">Entrar</button>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>

const supabase = window.supabase.createClient(
  "https://cglpqxwuleilocifwuma.supabase.co",
  "sb_publishable_vDeRR2vZXRpRgZVHSKArwQ_EuCD0poY"
);

// üîπ LOGIN
async function login() {

  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value;

  const { data, error } = await supabase.auth.signInWithPassword({
    email,
    password
  });

  if(error){
    alert("Login incorrecto");
    return;
  }

  alert("Login correcto");

  // ‚úÖ redirigir al panel
  window.location.href = "panel.html";
}


// üîπ VERIFICAR SI YA EST√Å LOGUEADO
async function verificarSesion() {

  const { data: { session } } = await supabase.auth.getSession();

  if(session){
    // si ya est√° logueado entra directo al panel
    window.location.href = "panel.html";
  }

}

// revisar sesi√≥n al cargar la p√°gina
verificarSesion();

</script>

</body>
</html>
