<!DOCTYPE html>
<html>
<body>

<h2>Login</h2>

<input id="email" placeholder="email">
<input id="password" type="password" placeholder="password">

<button onclick="login()">Entrar</button>

<!-- ‚úÖ SDK correcto -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.js"></script>

<script>

// ‚úÖ crear cliente correctamente
const supabase = supabase.createClient(
  "https://cglpqxwuleilocifwuma.supabase.co",
  "sb_publishable_vDeRR2vZXRpRgZVHSKArwQ_EuCD0poY"
);


// üîê LOGIN
async function login() {

  console.log("intentando login");

  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value;

  const { data, error } = await supabase.auth.signInWithPassword({
    email: email,
    password: password
  });

  console.log(data);
  console.log(error);

  if (error) {
    alert(error.message);
    return;
  }

  alert("Login correcto");

  window.location.href = "panel.html";
}


// ‚úÖ VERIFICAR SESI√ìN
async function verificarSesion() {

  const { data } = await supabase.auth.getSession();

  if (data.session) {
    window.location.href = "panel.html";
  }
}

verificarSesion();

</script>

</body>
</html>
